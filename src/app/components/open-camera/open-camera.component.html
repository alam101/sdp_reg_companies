<ion-content fullscreen style="z-index: 12;">
  <!-- Camera preview -->
  <video #video autoplay class="camera-preview"></video>

  <!-- Overlay UI -->
  <div class="overlay">
    <!-- Top bar -->
  <div class="top-bar">
  <ion-button fill="clear" color="light" (click)="goBack()">
    <ion-icon name="arrow-back-outline"></ion-icon>
  </ion-button>

  <h2>ðŸ“· {{ mode === 'photo' ? 'Snap Food' : 'Scan Barcode' }}</h2>
</div>

    <!-- Center guide (optional scan box) -->
    <div class="scan-box"></div>

    <!-- Bottom actions -->
   <div class="bottom-bar">
  <ion-button shape="round" size="large" class="capture-btn" (click)="onCaptureClick()">
    <ion-icon name="radio-button-on-outline"></ion-icon>
  </ion-button>

  <ion-button class="toggle-btn" fill="clear" (click)="toggleMode()">
    <ion-icon [name]="mode === 'photo' ? 'barcode-outline' : 'camera-outline'"></ion-icon>
  </ion-button>
    </div>
  </div>

  <canvas #canvas hidden></canvas>

  <div *ngIf="isOpen" style="position: fixed; height:100%;width:100%;background:#000;opacity: .5;top:0;z-index:10;"></div>
  <div *ngIf="isOpen" style="position: fixed; height:40%;width:80%;background:#fff;opacity: .5;top:25%;left:10%;z-index:11;border-radius: 10px;">
    <div style="text-align: center;margin-top:2rem;">
      <ion-icon name="close-outline" (click)="isOpen=false" style="float: right;
    margin-right: 1rem;
    font-size: 1.5rem;
    position: absolute;
    top: 0;
    right: -18px;"></ion-icon>
      <ion-row>
        <ion-col size="12">
          <ion-item lines="none" style="margin-top: 1rem;">
            <label style="width:25%;" slot="start">Slot</label>
            <ion-input  [(ngModel)]="slot" type="number" style="margin-left: 1rem;border:1px solid;padding:0 1rem !important;" placeholder="Enter Slot"></ion-input>
          </ion-item>
            <ion-item lines="none" style="margin-top: 1rem;">
            <label style="width:25%;" slot="start">Portion</label>
            <ion-input  [(ngModel)]="portion" type="number" style="margin-left: 1rem;border:1px solid;padding:0 1rem !important;" placeholder="Enter Portion"></ion-input>
          </ion-item>
            <ion-item lines="none" style="margin-top: 1rem;">
            <label style="width:25%;" slot="start">Unit</label>
            <ion-input  type="text" [(ngModel)]="unit" style="margin-left: 1rem;border:1px solid;padding:0 1rem !important;" placeholder="Enter Unit"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
        <ion-row style="margin-top: 2rem;">
          <ion-col class="ion-text-center">
              <ion-button (click)="submitFoodDetailForUpdate()">Submit</ion-button>  
          </ion-col>
        </ion-row>
    </div>
  </div>
</ion-content>
